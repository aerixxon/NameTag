<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->

    <title>NameTag</title>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
      <script src="http://code.jquery.com/jquery-latest.min.js"></script>


    <!-- Bootstrap -->
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
    <!-- Optional theme -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap-theme.min.css">
    <!-- Latest compiled and minified JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
     <script type="text/javascript" src="Student.js"></script>
      <script type="text/javascript" src="roster.js"></script>
   
      
    <link rel="stylesheet" href="./mainlayout.css">
  </head>

  <body>
    <nav class="navbar navbar-default navbar-fixed-top">
      <div class="container-fluid">
        <div class="navbar-header">
          <a class="navbar-brand" href="#">NameTag</a>
        </div>
        <div class="collapse navbar-collapse" id="navbar-collapse">
          <ul class="nav navbar-nav navbar-right">
            <li class="btn-group">
              <button type="button" class="btn btn-default dropdown-toggle navbar-btn" data-toggle="dropdown" aria-expanded="false">
                6.813 <span class="caret"></span>
              </button>
              <ul class="dropdown-menu" role="menu">
                <li><a href="#">6.813</a></li>
              </ul>
            </li>
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Rob Miller <span class="caret"></span></a>
              <ul class="dropdown-menu" role="menu">
                <li><a href="profile.html">Progress</a></li>
                <li class="divider"></li>
                <li><a href="login.html">Sign out</a></li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </nav> <!-- navbar -->


    <div class="container">
      <div class="row" id="top-row">

      </div>
    </div> <!-- top row -->

    <div class="container-fluid">
      <div class="row">
        <div class="col-lg-2 sidebar">
          <div class="panel panel-default">
            <div class="panel-heading">Filters</div>
            <ul class="list-group">
              <li class="list-group-item">
                <div class="checkbox">
                  <label>
                    <input type="checkbox" id = "ToLearn" value="">To Learn
                  </label>
                </div>
                <div class="checkbox" >
                  <label>
                    <input type="checkbox" id = "Learned2" value="">Learned
                  </label>
                </div>
              </li>
<!--
              <li class="list-group-item">
                <div class="checkbox">
                  <label>
                    <input type="checkbox" id = "Male" value="">Male
                  </label>
                </div>
                <div class="checkbox">
                  <label>
                    <input type="checkbox" id = "Female" value="">Female
                  </label>
                </div>
              </li>
-->
<!--
              <li class="list-group-item">
                <div class="checkbox">
                  <label>
                    <input type="checkbox" id = "Undergrad" value="">Undergraduate
                  </label>
                </div>
                <div class="checkbox">
                  <label>
                    <input type="checkbox" id = "Grad" value="">Graduate
                  </label>
                </div>
              </li>     
-->
            </ul>
          </div>
        </div> <!-- filters panel -->

        <div id ="tabs" class="col-lg-10">
          <div role="tabpanel">
            <!-- Nav tabs -->
            <ul id = "myTabs" class="nav nav-tabs" role="tablist">
              <li id ="Roster" role="presentation" class="active"><a href="#roster" aria-controls="roster" role="tab" data-toggle="tab">Roster</a></li>
              <li id = "SeatingChart"role="presentation"><a href="#seating" aria-controls="seating" role="tab" data-toggle="tab">Seating Chart</a></li>
              <li role="presentation"><a href="#quiz" aria-controls="quiz" role="tab" data-toggle="tab" id = "quiz_tab" >Quiz Mode</a></li>
            </ul>

            <!-- Tab panes -->
            <div class="tab-content">
               

                
                
                
                
                
                <!--Roster View-->
                <div role="tabpanel" class="tab-pane fade in active" id="roster"> 
                    <div class="list-group">
                        <table id = "faceTable" class ="table"> 
<!--
                          This is where the faces show up.
-->
                        </table>
                    </div>  
                </div>
                <!--End of Roster View-->
                
                
        
              <!--Seating Chart-->

              <div role="tabpanel" class="tab-pane fade" id="seating">
                <div id="picture-bank">
                  <img class="drag" src="faces/Allie.png">
                  <img class="drag" src="faces/Eben.png">
                  <img class="drag" src="faces/Joyce.png">
                  <img class="drag" src="faces/Malika.png">
                  <img class="drag" src="faces/McCall.png">
                  <img class="drag" src="faces/Milly.png">
                  <img class="drag" src="faces/Sara.jpg">
                  <img class="drag" src="faces/Scotty.png">
                </div>
                <div id="seating-area">
                  <div id="half-circle-container">
                    <div id="half-circle">
                      <div id="circle">
                        <div id="triangle"></div>                        
                      </div>
                    </div>                  
                  </div>

                </div>
              </div>
        <!--Flashcards-->

              <!--End of Seating Chart-->

              <!--Quiz Mode-->
              <div role="tabpanel" class="tab-pane fade" id="quiz">
                    <div id ="sideBar">
                      <div id = "sideBarHeading"> Progress</div>
                      <div id = "correctSoFar" class = "sideBarProgress">Correct: 0</div>                       
                      <div id = "incorrectSoFar" class = "sideBarProgress">Incorrect: 0</div>
                      <button id = "endQuizButton" class = "btn btn-default endMyQuiz" >End Quiz</button>
                    </div>
                <div class="panel panel-default flashcardBox">
                  <!--Create a quiz-->
                  <div class="panel-body flashcard createQuiz" style=  "padding-top: 10px";>                   
                      <div class="row">
                        <div class="">
                          <div>
                               <div class = "quizHeading">Create a New Quiz!</div>  
                               <form class ="col-md-offset-3" id = "createQuizQuestions" action = "">
                               <div>1. Select a quiz type:</div>
                                <input type = "radio" name = "quizType" id = "toLearnNew" checked= "checked"> Learn New Students <br>
                                <div>    </div> <input type = "radio" name = "quizType" id = "toReview" padding-left="5px"> Review Learned Students<br>
                                <p> </p>
                                <div>2. Select a number of students:</div>
                                <input type = "radio" name = "studentNumbers" id = "five" checked = "checked"> 5
                                <input type = "radio" name = "studentNumbers" id = "ten"> 10
                                <input type = "radio" name = "studentNumbers" id = "twenty"> 20
                              </form>
                          </div>
                          <button id = "okButton" class = "btn btn-success col-md-offset-4">Start!</button>
                      </div>
                    </div>
                  </div>
                  <!--Back of Flashcard with Name and check/X-->
                  <div class="panel-body flashcard hidden flashcardBack" style=  "padding-top: 40px";>                   
                    <div class="row">
                      <div class="col-md-4"></div>
                      <div class="col-md-4">
                           <div id = "flashcardName">Jane Doe</div>
                           <div id = "learned" class = "flashcardLearned"> Do you know this Student?</div>
                           <div><img id = "check" class = "checkmark" src = "greenCheck.png"></img><img id = "x" class = "delete" src = "redX.png"></img></div>
                      </div>
                    </div>
                  </div>
                  <!--Front of Flashcard with Face and click to flip-->
                  <div class="panel-body flashcard hidden flashcardFront" style=  "padding-top: 40px";>                   
                    <div class="row">
                      <div class="col-md-4"></div>
                      <div class="col-md-4">
                           <img id = "flashcardFace" class = "thumbnail" src="faceFemale.jpg"></img></div>
                      </div>
                  </div>
                  <div id = "flashcardProgress" class ="progress1 hidden">1 of 3</div>
                  <div class = "flip hidden">click to flip</div>
                  <!--Finishing Quiz screen-->
                  <div class="panel-body flashcard finishQuiz hidden" style=  "padding-top: 10px";>                   
                      <div class="row">
                        <div class="">                               
                          <div class = "quizHeading">You finished your quiz!</div>  
                            <div class = "col-md-offset-4">
                          <button id = "startNewQuizButton" class = "btn btn-success">Start New Quiz</button>
                            </div>
                      </div>
                    </div>
                  </div>
               </div>
             </div>
                </div>
              </div>
              <!--End of Quiz Mode-->

            </div>
          </div> <!-- tab frame -->
      </div>
    </div>

    <script>

        var Learned = ["Allie", "Joyce", "Malika", "McCall"]
        var ToLearn = ["Milly", "Sara", "Scotty", "Eben"]; 
        var FiltersOn = [];   
        var list_of_people = [];
        
        
        var bool_Learned;
        var bool_ToLearn;
        
        var Allie = new Student("Allie", "Erixxon", "F", false, true);
        var Joyce = new Student("Joyce", "Hong", "F", false, true);
        var Malika = new Student("Malika", "Flanagan", "F", false, true);
        var McCall = new Student("McCall", "Houston", "F", false, true);
        var Milly = new Student("Milly", "Helmick", "F", false, true); 
        var Sara = new Student("Sara", "Huang", "F", true, true); 
        var Scotty = new Student("Scotty", "Stephens", "M", true, false); 
        var Eben = new Student("Eben", "Bitonte", "M", true, false); 
        var Colin = new Student("Colin", "Godwin" , "M", true, false);
        var Derek = new Student("Derek", "Barnes", "M", false, true);
        var Emma = new Student("Emma", "Chesley", "F", true, true);
        var Hannah = new Student("Hannah", "Chen", "F", false, true); 
        var Joanna = new Student("Joanna", "Chen", "F", false, true);
        var Tre = new Student("Tre", "Albritten", "M", true, true);
        var Liz = new Student("Elizabeth", "Cox", "F", true, true);
        var Luca = new Student("Luca", "Cacopardo", "M", false, false);
        var Manolya = new Student("Manolya", "Altan", "F", true, false);
        var Natalie = new Student("Natalie", "Alper", "F", true, false); 
        var Nick = new Student("Nick", "Diamantoni", "M", false, true);
        var Priyanka = new Student("Priyanka", "Shome", "F", false, true); 
        var Benji = new Student("Benji", "Xie", "M", true, false); 
        

        var Students = [Allie, Joyce, Malika, McCall, Milly, Sara, Scotty, Eben, Colin, Derek, Emma, Hannah, Joanna, Tre, Liz, Luca, Manolya, Natalie, Nick, Priyanka, Benji]; 

        
            
        
        // Database of Students 
        

//        var dict = {"Allie": "faces/Allie.png", "Joyce": "faces/Joyce.png", "Malika":"faces/Malika.png", "McCall":"faces/McCall.png", "Milly":"faces/Milly.png", "Sara":"faces/Sara.jpg", "Scotty": "faces/Scotty.png", "Eben": "faces/Eben.png"};

      
      $(document).ready(function() {
        //var names  = ["Malika Flanagan", "Joyce Hong", "Cimran Virdi", "Allie Erixxon", "Sara Huang"]
        //var pictures = ["faces/malika.png", "faces/joyce.png",]
        var counter = 0
        var finished = false
        var correct = 0
        var incorrect = 0
        inQuiz = false
        var size1 = 0
        var learnedStudents 
        var numberOfStudents

        // SEATING CHART: global variables for drag and drop
        var _startX = 0;            // mouse starting positions
        var _startY = 0;
        var _offsetX = 0;           // current element offset
        var _offsetY = 0;
        var _dragElement;           // needs to be passed from OnMouseDown to OnMouseMove
        var _oldZIndex = 0;         // we temporarily increase the z-index during drag
        var _debug = $('debug');    // makes life easier

        var list_of_learn = []
        var list_of_known = []
        var thisFace

        document.getElementById("ToLearn").checked = true;
        bool_Learned = true;
        document.getElementById("Learned2").checked = true;
        bool_ToLearn = true; 
        $('.endMyQuiz').toggleClass('hidden');

        
          
            // Fill in the roster based on the filters that are checked
                
            var list_of_people = [];
            for (i = 0; i < Students.length; i++ ) {
                var student = Students[i]; // 
                var currentPerson = student.fullName
                var newRow = document.getElementById("faceTable").insertRow();
                var newPic = document.createElement('img');
                newPic.src = student.img;
                var newface = newRow.insertCell(0);
                newface.setAttribute('style', 'width: 40px');
                newface.innerHTML = "<img src=" + newPic.src + " alt=" + currentPerson + "height='70' width='60' class = 'studentName'>"; 
                var newName = newRow.insertCell(1);           
                newName.innerHTML = currentPerson;
            }


        $('#Roster').on('click', function() {
            document.getElementById("ToLearn").disabled = false;
            document.getElementById("Learned2").disabled = false;
//            document.getElementById("Undergrad").disabled = false;
//            document.getElementById("Grad").disabled = false;
//            document.getElementById("Male").disabled = false;
//            document.getElementById("Female").disabled = false;
        });

        $('#SeatingChart').on('click', function() {
            document.getElementById("ToLearn").disabled = true;
            document.getElementById("Learned2").disabled = true;
//            document.getElementById("Undergrad").disabled = false;
//            document.getElementById("Grad").disabled = false;
//            document.getElementById("Male").disabled = false;
//            document.getElementById("Female").disabled = false;
        });

        $('#quiz_tab'). on('click', function(){
            if(inQuiz){          
              if(learnedStudents==true) {
                document.getElementById("Learned2").checked = true;
                document.getElementById("ToLearn").checked = false;}
              else {
                document.getElementById("ToLearn").checked = true;
                document.getElementById("Learned2").checked = false;}
             //disble filters in quizmode
              document.getElementById("ToLearn").disabled = true;
              document.getElementById("Learned2").disabled = true;}                              
        });
          
          

        $('#startNewQuizButton').on('click', function() {
            $('.createQuiz').toggleClass('hidden');
            $('.finishQuiz').toggleClass('hidden');
            $('.endMyQuiz').addClass('hidden');
          inQuiz = true;

          document.getElementById("correctSoFar").innerHTML = ("Correct: " + 0);
          document.getElementById("incorrectSoFar").innerHTML = ("Incorrect: " + 0);
          document.getElementById("sideBarHeading").innerHTML = "Progress";


        });


        $('#endQuizButton').on('click', function() {
            $('.endMyQuiz').addClass('hidden');
            $('.createQuiz').toggleClass('hidden');
            $('.flashcardFront').addClass('hidden');
            $('flashcardBack').addClass('hidden');
            $('.finishQuiz').addClass('hidden');

           inQuiz = false;

          document.getElementById("correctSoFar").innerHTML = ("Correct: " + 0);
          document.getElementById("incorrectSoFar").innerHTML = ("Incorrect: " + 0);
            document.getElementById("ToLearn").disabled = false;
            document.getElementById("Learned2").disabled = false;
        });

        $("#okButton").on('click', function() {
         $('.endMyQuiz').removeClass('hidden');

          //check radio buttons learned students
        counter = 0
        finished = false
        correct = 0
        incorrect = 0
        size1 = 0

        list_of_learn = []
        list_of_known = []
          if(document.getElementById('toReview').checked) {
            learnedStudents= true
            document.getElementById("Learned2").checked = true;
           document.getElementById("ToLearn").checked = false;}
          else if(document.getElementById('toLearnNew').checked) {
            learnedStudents = false
            document.getElementById("ToLearn").checked = true;
           document.getElementById("Learned2").checked = false;}
          if(document.getElementById('five').checked) {
            numberOfStudents= 5}
          else if(document.getElementById('ten').checked) {
            numberOfStudents= 10}           
          else if(document.getElementById('twenty').checked) {
            numberOfStudents= 20} 

          inQuiz = true;
          
          //filter for learnedStudents or KnownStudents
        list_of_learn = []
        list_of_known = []
        console.log(Students);
        for (i in Students){
          student = Students[i];
          console.log(Students[i]);
          if (student.learned == false){
            list_of_learn.push(student);
          }
          else{
            list_of_known.push(student);
          }
        }
        console.log(list_of_learn);
        console.log(list_of_known);
        if (learnedStudents == true){
          size1 = Math.min(list_of_known.length, numberOfStudents);
        }
        else{
          size1 = Math.min(list_of_learn.length, numberOfStudents);

        }
        console.log("MIN" + size1)

        if (learnedStudents== true){
              thisFace = list_of_known[counter];
              }
        else{                  
              thisFace = list_of_learn[counter];
          }

          //set first face
          $('.flashcardFront').toggleClass('hidden');
          $('.createQuiz').toggleClass('hidden');
          document.getElementById("flashcardName").innerHTML = thisFace.fullName;
          document.getElementById("flashcardFace").src = thisFace.img;
          document.getElementById("flashcardProgress").innerHTML = (counter+1)+ " of " +size1;


          //disable filters for quiz
//          document.getElementById("Female").disabled = true;
          document.getElementById("ToLearn").disabled = true;
          document.getElementById("Learned2").disabled = true;
//          document.getElementById("Undergrad").disabled = true;
//          document.getElementById("Grad").disabled = true;
//          document.getElementById("Male").disabled = true;
            
            $('.flashcardBack').toggleClass('hidden');
            $('.flashcardFront').toggleClass('hidden');
            $('.progress1').toggleClass('hidden');

        

        });

        //flips card over
        $('.flashcardBox').on('click', function() {
          if(finished == false && inQuiz == true && size1 != 0){
            console.log("in flip");
            $('.flashcardBack').toggleClass('hidden');
            $('.flashcardFront').toggleClass('hidden');
            $('.flip').toggleClass('hidden');
          }
        });


     

        //when delete or checkmark are pressed, turns to front of card with different names
        $('.delete').on('click', function() {
          console.log("delete");
          incorrect = incorrect + 1
          counter = counter+1
        //quiz finished
          if(counter == (size1)){
            document.getElementById("sideBarHeading").innerHTML = "Results";

            $('.flashcardBack').toggleClass('hidden');
            $('.finishQuiz').toggleClass('hidden');
            //document.getElementById("flashcardName").style.display = "none"
            //document.getElementById("check").style.display = "none";
            //document.getElementById("x").style.display = "none";
            //document.getElementById("learned").style.display = "none";
            document.getElementById("flashcardProgress").style.display = "none";
            finished= true;
            document.getElementById("ToLearn").disabled = false;
            document.getElementById("Learned2").disabled = false;
//            document.getElementById("Undergrad").disabled = false;
//            document.getElementById("Grad").disabled = false;
//            document.getElementById("Male").disabled = false;
//            document.getElementById("Female").disabled = false;
            document.getElementById("incorrectSoFar").innerHTML = ("Incorrect: " + incorrect);
          }
          else{
          if (learnedStudents==true){
            thisFace = list_of_known[counter];
          }
          else{
             thisFace = list_of_learn[counter];
          }
          thisFace.learned = false;
          document.getElementById("flashcardName").innerHTML = thisFace.fullName;
          document.getElementById("flashcardFace").src = thisFace.img;
          document.getElementById("flashcardProgress").innerHTML = (counter+1)+ " of " +size1;
          document.getElementById("incorrectSoFar").innerHTML = ("Incorrect: " + incorrect);

        }
       });



        $('.checkmark').on('click', function() {
          correct = correct + 1
          console.log(counter);
          counter = counter + 1
        
        //quiz finished
          if(counter == (size1)){
            document.getElementById("sideBarHeading").innerHTML = "Results";
            $('.flashcardBack').toggleClass('hidden');
            $('.finishQuiz').toggleClass('hidden');
            //document.getElementById("flashcardName").style.display = "none"
            //document.getElementById("check").style.display = "none";
            //document.getElementById("x").style.display = "none";
            //document.getElementById("learned").style.display = "none";
            document.getElementById("flashcardProgress").style.display = "none";

            document.getElementById("ToLearn").disabled = false;
            document.getElementById("Learned2").disabled = false;
            document.getElementById("correctSoFar").innerHTML = ("Correct: " + correct);

//            document.getElementById("Undergrad").disabled = false;
//            document.getElementById("Grad").disabled = false;
//            document.getElementById("Male").disabled = false;
//            document.getElementById("Female").disabled = false;
            finished= true;
          }
          else{
          if (learnedStudents==true){
            thisFace = list_of_known[counter];
            console.log(list_of_known);
            console.log(thisFace);
          }
          else{
            thisFace = list_of_learn[counter];
            console.log(list_of_learn);
            console.log(thisFace);
          }
          thisFace.learned = true;
          document.getElementById("flashcardName").innerHTML = thisFace.firstName + " " + thisFace.lastName;
          document.getElementById("flashcardFace").src = thisFace.img;
          document.getElementById("flashcardProgress").innerHTML = (counter+1)+ " of " +size1;
          document.getElementById("correctSoFar").innerHTML = ("Correct: " + correct);

        }
       });

        $('.checkmark').hover( function() {
           document.getElementById("check").src = "greenCheckDark.png";},
            function(){
            document.getElementById("check").src = "greenCheck.png";
             });

        $('.delete').hover( function() {
            document.getElementById("x").src = "RedXDark.png";},
            function(){
            document.getElementById("x").src = "redX.png";
             });


        // SEATING CHART
        InitDragDrop();

        function InitDragDrop() {
            document.onmousedown = OnMouseDown;
            document.onmouseup = OnMouseUp;
        }

        function OnMouseDown(e){
            // IE is retarded and doesn't pass the event object
            if (e == null) 
                e = window.event; 
            
            // IE uses srcElement, others use target
            var target = e.target != null ? e.target : e.srcElement;
            
            _debug.innerHTML = target.className == 'drag' 
                ? 'draggable element clicked' 
                : 'NON-draggable element clicked';

            // for IE, left click == 1
            // for Firefox, left click == 0
            if ((e.button == 1 && window.event != null || 
                e.button == 0) && 
                target.className == 'drag') {
                // grab the mouse position
                _startX = e.clientX;
                _startY = e.clientY;
                
                // grab the clicked element's position
                _offsetX = ExtractNumber(target.style.left);
                _offsetY = ExtractNumber(target.style.top);
                
                // bring the clicked element to the front while it is being dragged
                _oldZIndex = target.style.zIndex;
                target.style.zIndex = 10000;
                
                // we need to access the element in OnMouseMove
                _dragElement = target;

                // tell our code to start moving the element with the mouse
                document.onmousemove = OnMouseMove;
                
                // cancel out any text selections
                document.body.focus();

                // prevent text selection in IE
                document.onselectstart = function () { return false; };
                // prevent IE from trying to drag an image
                target.ondragstart = function() { return false; };
                
                // prevent text selection (except IE)
                return false;
            }
        }

        function OnMouseMove(e) {
            if (e == null) 
                var e = window.event; 

            // this is the actual "drag code"
            _dragElement.style.left = (_offsetX + e.clientX - _startX) + 'px';
            _dragElement.style.top = (_offsetY + e.clientY - _startY) + 'px';
            
            _debug.innerHTML = '(' + _dragElement.style.left + ', ' + 
                _dragElement.style.top + ')';   
        }

        function OnMouseUp(e) {
            if (_dragElement != null) {
                _dragElement.style.zIndex = _oldZIndex;

                //console.log(_dragElement.style.left);
                //if (_dragElement.style.left < 100 || _dragElement.style.right > 1500) { // if mouse is off the canvas, restore original position
                //  _dragElement.style.left = '0px';
                //  _dragElement.style.top = '0px';
                //}

                // we're done with these events until the next OnMouseDown
                document.onmousemove = null;
                document.onselectstart = null;
                _dragElement.ondragstart = null;

                // this is how we know we're not dragging      
                _dragElement = null;
                
                _debug.innerHTML = 'mouse up';
            }
        }

        function ExtractNumber(value) {
            var n = parseInt(value);
          
            return n == null || isNaN(n) ? 0 : n;
        }

        // The following two functions prevent unwanted default drag-drop / selection behavior
        $(document).on("dragstart", function(e) {
            return false;
        });

        $(document).on("selectstart", function(e) {
            return false;
        });
    });


    
    </script>


    <script src="./mainlayout.js"></script>
  </body>
</html>